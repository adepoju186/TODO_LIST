<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task List</title>
    {% load static %}
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- Background Animation -->
    <div class="background-animation"></div>

    <div class="container animate-fade">
        <h1 class="title">My Tasks</h1>

        <!-- Auth controls -->
        {% if user.is_authenticated %}
            <p style="text-align: center;">
                Welcome, <strong>{{ user.username }}</strong>!
                <form action="{% url 'logout' %}" method="post" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="btn-glow">🚪 Logout</button>
</form>

            </p>
        {% else %}
            <p style="text-align: center;">
                <a href="{% url 'login' %}" class="btn-glow">🔑 Login</a>
                <a href="{% url 'register' %}" class="btn-glow">📝 Register</a>
            </p>
        {% endif %}

        <!-- Add Task Button -->
        {% if user.is_authenticated %}
            <a href="{% url 'task_create' %}" class="add-btn">➕ Add New Task</a>
        {% endif %}

        <!-- Task list -->
        <ul class="task-list">
            {% for task in tasks %}
                <li class="task fade-in {% if task.completed %}completed{% endif %}">
                    <a href="{% url 'task_detail' task.pk %}">{{ task.title }}</a>
                    <span class="status">
                        {% if task.completed %} ✅ Done {% else %} ❌ Pending {% endif %}
                    </span>
                </li>
            {% empty %}
                <li class="task fade-in">No tasks yet.</li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>
